<% layout('layouts/boilerplate') %> 
<% let asisCount = 0 %>
<% let faltasCount = 0 %>
<% let tardieCount = 0 %>
<% let justiCount = 0 %>
<% const asisArr = [] %>
<% const faltaArr = [] %> 
<% const tardie = [] %>
<% const justifi = [] %>   
<% for (day of lists.day) {%>
    <% asisArr.push(day.asistencias) %> 
    <% faltaArr.push(day.faltas) %> 
    <% tardie.push(day.retardos) %>
    <% justifi.push(day.justificado) %>  
<% } %>  
<div class="container m-5">
    <h4 class="offset-md-4 mb-5">Totales Mensuales</h4>
    <div class="row">
        <div class="col">Asistencias</div>
        <div class="col">Faltas</div>
        <div class="col">Retardos</div>
        <div class="col">Faltas Justificadas</div>
    </div>
    <div class="row">
        <div class="col"><%= asisArr.reduce((a,b) => {return a + b},0) %> </div>
        <div class="col"><%= faltaArr.reduce((a,b) => {return a + b},0) %> </div>
        <div class="col"><%= tardie.reduce((a,b) => {return a + b},0) %> </div>
        <div class="col"><%= justifi.reduce((a,b) => {return a + b},0) %> </div>
    </div>
</div> 
<div class="container rutas-table m-5">
    <% for(list of lists.day) {%>
        <h3 class="offset-md-4"><%= list.date.toLocaleDateString() %> </h3>
        <div class="row rutas-head">
            <div class="col">Unidad</div>
            <div class="col">Grupo</div>
            <div class="col">Nombre</div>
            <div class="col">Tipo de Unidad</div>
            <div class="col">Coordinador</div>
            <div class="col">Empresa</div>
            <div class="col">Valor</div>
        </div>
        <% list.driver.forEach((i, index) => {%>
            <div class="row rutas-row">
                <div class="col"><%= i.bus.unidad %> </div>
                <div class="col">V2</div>
                <div class="col"><%= i.name %> </div>
                <div class="col"><%= i.bus.tipo %> </div>
                <div class="col"><%= i.coordinator %> </div>
                <div class="col"><%= i.company %> </div>
                <div class="col"><%= list.attendance[index] %> </div> 
            </div>
        <%}) %> 
    <% } %>  
</div>
